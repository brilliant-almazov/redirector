# redirector

[English](../README.md) | [╨а╤Г╤Б╤Б╨║╨╕╨╣](README.ru.md) | [ф╕нцЦЗ](README.zh.md) | **рд╣рд┐рдВрджреА** | [Espa├▒ol](README.es.md) | [Portugu├кs](README.pt.md) | [Fran├зais](README.fr.md) | [Deutsch](README.de.md) | [цЧецЬмшкЮ](README.ja.md) | [эХЬъ╡ньЦ┤](README.ko.md) | [Polski](README.pl.md) | [Nederlands](README.nl.md) | [Italiano](README.it.md) | [T├╝rk├зe](README.tr.md) | [╨г╨║╤А╨░╤Ч╨╜╤Б╤М╨║╨░](README.uk.md) | [Bahasa Indonesia](README.id.md) | [Tiс║┐ng Viс╗Зt](README.vi.md) | [Svenska](README.sv.md) | [Suomi](README.fi.md)

[![CI](https://github.com/brilliant-almazov/redirector/actions/workflows/ci.yml/badge.svg)](https://github.com/brilliant-almazov/redirector/actions/workflows/ci.yml)
[![Coverage](https://img.shields.io/endpoint?url=https://gist.githubusercontent.com/brilliant-almazov/5f930cca5d181b300d81d45850ddaf67/raw/coverage.json)](https://github.com/brilliant-almazov/redirector)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

[![RPS](https://img.shields.io/endpoint?url=https://gist.githubusercontent.com/brilliant-almazov/5f930cca5d181b300d81d45850ddaf67/raw/rps.json)](https://github.com/brilliant-almazov/redirector)
[![Latency](https://img.shields.io/endpoint?url=https://gist.githubusercontent.com/brilliant-almazov/5f930cca5d181b300d81d45850ddaf67/raw/latency.json)](https://github.com/brilliant-almazov/redirector)
[![Cache Hit](https://img.shields.io/endpoint?url=https://gist.githubusercontent.com/brilliant-almazov/5f930cca5d181b300d81d45850ddaf67/raw/cache_hit_rate.json)](https://github.com/brilliant-almazov/redirector)

рдЗрдВрдЯрд░рд╕реНрдЯрд┐рд╢рд┐рдпрд▓ рдкреЗрдЬ рдФрд░ hashid-рдЖрдзрд╛рд░рд┐рдд рд╢реЙрд░реНрдЯ рд▓рд┐рдВрдХ рдХреЗ рд╕рд╛рде рд╕реБрд░рдХреНрд╖рд┐рдд URL рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рд╕реЗрд╡рд╛ред

## рд╕рдорд╕реНрдпрд╛

рд▓рдВрдмреЗ URL рд╕рд╛рдЭрд╛ рдХрд░рдирд╛ рдЕрд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред URL рд╢реЙрд░реНрдЯрдирд░ рдореМрдЬреВрдж рд╣реИрдВ рд▓реЗрдХрд┐рди рдЕрдХреНрд╕рд░ рддреБрд░рдВрдд рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ рд╕реБрд░рдХреНрд╖рд╛ рдЬреЛрдЦрд┐рдо рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рд╣реЛрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдпрд╣ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рд╡реЗ рдХрд╣рд╛рдБ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВред

**redirector** рд╕реБрд░рдХреНрд╖рд┐рдд рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ:
- рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рд╕реЗ рдкрд╣рд▓реЗ рд▓рдХреНрд╖реНрдп URL рджрд┐рдЦрд╛рдиреЗ рд╡рд╛рд▓рд╛ рдЗрдВрдЯрд░рд╕реНрдЯрд┐рд╢рд┐рдпрд▓ рдкреЗрдЬ
- рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЬрд╛рдЧрд░реВрдХрддрд╛ рдХреЗ рд▓рд┐рдП рдХрд╛рдЙрдВрдЯрдбрд╛рдЙрди рдЯрд╛рдЗрдорд░
- рд╕реБрдВрджрд░, рдмреНрд░рд╛рдВрдбреЗрдб рдкреЗрдЬ

## рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ

- ЁЯФЧ **Hashid URLs** - рдЫреЛрдЯреЗ, рдЕрджреНрд╡рд┐рддреАрдп, рдЧреИрд░-рдЕрдиреБрдХреНрд░рдорд┐рдХ IDs (рдЬреИрд╕реЗ `/r/abc123`)
- тП▒я╕П **рдЗрдВрдЯрд░рд╕реНрдЯрд┐рд╢рд┐рдпрд▓ рдкреЗрдЬ** - рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рд╕реЗ рдкрд╣рд▓реЗ рд▓рдХреНрд╖реНрдп URL рджрд┐рдЦрд╛рддрд╛ рдХрд╛рдЙрдВрдЯрдбрд╛рдЙрди
- тЪб **Redis рдХреИрд╢рд┐рдВрдЧ** - рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдпреЛрдЧреНрдп TTL рдХреЗ рд╕рд╛рде рддреЗрдЬрд╝ рд▓реБрдХрдЕрдк
- ЁЯЫбя╕П **рд╕рд░реНрдХрд┐рдЯ рдмреНрд░реЗрдХрд░** - рдХреИрд╕реНрдХреЗрдбрд┐рдВрдЧ рд╡рд┐рдлрд▓рддрд╛рдУрдВ рдХреЗ рдЦрд┐рд▓рд╛рдл рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реБрд░рдХреНрд╖рд╛
- ЁЯЪж **рд░реЗрдЯ рд▓рд┐рдорд┐рдЯрд┐рдВрдЧ** - рд╡реИрд╢реНрд╡рд┐рдХ рдФрд░ рдбреЗрдЯрд╛рдмреЗрд╕-рд╕реНрддрд░реАрдп рд░реЗрдЯ рд▓рд┐рдорд┐рдЯ
- ЁЯУК **Prometheus рдореЗрдЯреНрд░рд┐рдХреНрд╕** - Basic Auth рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд╕рд╛рде рдкреВрд░реНрдг рдЕрд╡рд▓реЛрдХрдиреАрдпрддрд╛
- ЁЯОи **рд╕реБрдВрджрд░ рдкреЗрдЬ** - рд╕рд╛рдлрд╝ 404 рдФрд░ рдЗрдВрдбреЗрдХреНрд╕ рдкреЗрдЬ
- ЁЯФС **рдПрдХрд╛рдзрд┐рдХ рд╕рд╛рд▓реНрдЯ** - рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП hashid рд╕рд╛рд▓реНрдЯ рд░реЛрдЯреЗрд╢рди рд╕рдорд░реНрдерди

## рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ

| рд▓рд╛рдЗрдЯ | рдбрд╛рд░реНрдХ | рд╡рд╛рд░реНрдо |
|------|-------|-------|
| ![рдбреИрд╢рдмреЛрд░реНрдб рд▓рд╛рдЗрдЯ](screenshots/dashboard-light.png) | ![рдбреИрд╢рдмреЛрд░реНрдб рдбрд╛рд░реНрдХ](screenshots/dashboard-dark.png) | ![рдбреИрд╢рдмреЛрд░реНрдб рд╡рд╛рд░реНрдо](screenshots/dashboard-warm.png) |
| ![рд▓реЙрдЧрд┐рди рд▓рд╛рдЗрдЯ](screenshots/login-light.png) | ![рд▓реЙрдЧрд┐рди рдбрд╛рд░реНрдХ](screenshots/login-dark.png) | ![рд▓реЙрдЧрд┐рди рд╡рд╛рд░реНрдо](screenshots/login-warm.png) |
| ![404 рд▓рд╛рдЗрдЯ](screenshots/not-found-light.png) | ![404 рдбрд╛рд░реНрдХ](screenshots/not-found-dark.png) | ![404 рд╡рд╛рд░реНрдо](screenshots/not-found-warm.png) |

| рдЗрдВрдбреЗрдХреНрд╕ рдкреЗрдЬ | рдЗрдВрдЯрд░рд╕реНрдЯрд┐рд╢рд┐рдпрд▓ |
|-------------|--------------|
| ![рдЗрдВрдбреЗрдХреНрд╕](screenshots/index.png) | ![рдЗрдВрдЯрд░рд╕реНрдЯрд┐рд╢рд┐рдпрд▓](screenshots/interstitial.png) |

## рдЯреЗрдХ рд╕реНрдЯреИрдХ

- **рднрд╛рд╖рд╛**: Rust (Tokio рдХреЗ рд╕рд╛рде async)
- **рд╡реЗрдм рдлреНрд░реЗрдорд╡рд░реНрдХ**: Axum
- **рдХреИрд╢**: Redis-compatible (Redis, Dragonfly, Valkey, KeyDB)
- **рдбреЗрдЯрд╛рдмреЗрд╕**: PostgreSQL (рдкреНрд▓рдЧреЗрдмрд▓ рд╕реНрдЯреЛрд░реЗрдЬ рд▓реЗрдпрд░)
- **рдореЗрдЯреНрд░рд┐рдХреНрд╕**: Prometheus + metrics-rs
- **рдкрд╛рд╕рд╡рд░реНрдб рд╣реИрд╢рд┐рдВрдЧ**: Argon2

> **рдиреЛрдЯ**: PostgreSQL рдХрд╛ рдЙрдкрдпреЛрдЧ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╕реНрдЯреЛрд░реЗрдЬ рдмреИрдХрдПрдВрдб рдХреЗ рд░реВрдк рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рд╕реНрдЯреЛрд░реЗрдЬ рд▓реЗрдпрд░ рдЕрдореВрд░реНрдд рд╣реИ рдФрд░ рдХрд┐рд╕реА рднреА рдбреЗрдЯрд╛ рд╕реНрд░реЛрдд рд╕реЗ рдмрджрд▓реА рдЬрд╛ рд╕рдХрддреА рд╣реИред рд╡рд░реНрддрдорд╛рди рдореЗрдВ рд╕рдХреНрд░рд┐рдп рд╡рд┐рдХрд╛рд╕ рдореЗрдВред

## рддреНрд╡рд░рд┐рдд рдкреНрд░рд╛рд░рдВрдн

### Docker

```bash
docker run -p 8080:8080 \
  -v $(pwd)/config.yaml:/config.yaml \
  ghcr.io/brilliant-almazov/redirector:latest
```

## рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕

| рдПрдВрдбрдкреЙрдЗрдВрдЯ | рдкреНрд░рдорд╛рдгреАрдХрд░рдг | рд╡рд┐рд╡рд░рдг |
|----------|------------|-------|
| `GET /` | рдирд╣реАрдВ | рдореБрдЦреНрдп рдкреГрд╖реНрда |
| `GET /r/{hashid}` | рдирд╣реАрдВ | рдЗрдВрдЯрд░рд╕реНрдЯрд┐рд╢рд┐рдпрд▓ рдкреЗрдЬ рдХреЗ рд╕рд╛рде рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ |
| `GET /health` | рдирд╣реАрдВ | рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдВрдЪ |
| `GET /metrics` | Basic | Prometheus рдореЗрдЯреНрд░рд┐рдХреНрд╕ |
| `GET /admin` | рд╕рддреНрд░ | рдПрдбрдорд┐рди рдбреИрд╢рдмреЛрд░реНрдб рд▓реЙрдЧрд┐рди |
| `GET /admin/dashboard` | рд╕рддреНрд░ | рдПрдбрдорд┐рди рдбреИрд╢рдмреЛрд░реНрдб |

## рдПрдбрдорд┐рди рдбреИрд╢рдмреЛрд░реНрдб

рд╕реЗрд╡рд╛ рдореЗрдВ рд▓рд╛рдЗрд╡ рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХреЗ рд▓рд┐рдП рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ рдПрдбрдорд┐рди рдбреИрд╢рдмреЛрд░реНрдб рд╢рд╛рдорд┐рд▓ рд╣реИред

### рд╕реЗрдЯрдЕрдк

1. **рдкрд╛рд╕рд╡рд░реНрдб рд╣реИрд╢ рдЬрдирд░реЗрдЯ рдХрд░реЗрдВ:**

```bash
cargo run --bin hash_password
# рдкреНрд░реЙрдореНрдкреНрдЯ рдкрд░ рдкрд╛рд╕рд╡рд░реНрдб рджрд░реНрдЬ рдХрд░реЗрдВ, рдпрд╛:
cargo run --bin hash_password -- "рдЖрдкрдХрд╛-рдкрд╛рд╕рд╡рд░реНрдб"
```

2. **config.yaml рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ:**

```yaml
admin:
  enabled: true
  session_ttl_hours: 24
  users:
    - username: admin
      password_hash: "$argon2id$v=19$m=19456,t=2,p=1$..."  # рдЪрд░рдг 1 рд╕реЗ
```

3. **рдбреИрд╢рдмреЛрд░реНрдб рдПрдХреНрд╕реЗрд╕ рдХрд░реЗрдВ:**

`http://localhost:8080/admin` рдЦреЛрд▓реЗрдВ рдФрд░ рдЕрдкрдиреЗ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рд╕реЗ рд▓реЙрдЧрд┐рди рдХрд░реЗрдВред

### рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ

- рд░рд┐рдпрд▓-рдЯрд╛рдЗрдо RPS рдФрд░ рд▓реЗрдЯреЗрдВрд╕реА рдЪрд╛рд░реНрдЯ
- рд╕рд┐рд╕реНрдЯрдо рдореЗрдЯреНрд░рд┐рдХреНрд╕ (CPU, рдореЗрдореЛрд░реА, рдЕрдкрдЯрд╛рдЗрдо)
- рдХреИрд╢ рд╣рд┐рдЯ рд░реЗрдЯ рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ
- рд╣рд╛рд▓ рдХреЗ рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯреНрд╕ рдХреА рд╕реВрдЪреА
- рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рд▓реЛрдб рд╕рд┐рдореБрд▓реЗрд╢рди
- рддреАрди рдереАрдо: рд▓рд╛рдЗрдЯ, рдбрд╛рд░реНрдХ, рд╡рд╛рд░реНрдо

## рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ

1. рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ `/r/{hashid}` рдкрд░ рдЬрд╛рддрд╛ рд╣реИ (рдЬреИрд╕реЗ `/r/abc123`)
2. рд╕реЗрд╡рд╛ hashid рдХреЛ рд╕рдВрдЦреНрдпрд╛рддреНрдордХ ID рдореЗрдВ рдбрд┐рдХреЛрдб рдХрд░рддреА рд╣реИ
3. URL рдХреЗ рд▓рд┐рдП Redis рдХреИрд╢ рдЬрд╛рдВрдЪрддреА рд╣реИ
4. рдХреИрд╢ рдорд┐рд╕ рдкрд░, PostgreSQL рд╕реЗ рдХреНрд╡реЗрд░реА рдХрд░рддреА рд╣реИ
5. рдкрд░рд┐рдгрд╛рдо рдХреЛ Redis рдореЗрдВ рдХреИрд╢ рдХрд░рддреА рд╣реИ
6. рдХрд╛рдЙрдВрдЯрдбрд╛рдЙрди рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░рд╕реНрдЯрд┐рд╢рд┐рдпрд▓ рдкреЗрдЬ рджрд┐рдЦрд╛рддреА рд╣реИ
7. рдХрд╛рдЙрдВрдЯрдбрд╛рдЙрди рдХреЗ рдмрд╛рдж, рд▓рдХреНрд╖реНрдп URL рдкрд░ рд░реАрдбрд╛рдпрд░реЗрдХреНрдЯ рдХрд░рддреА рд╣реИ

## рд▓рд╛рдЗрд╕реЗрдВрд╕

MIT рд▓рд╛рдЗрд╕реЗрдВрд╕ - рд╡рд┐рд╡рд░рдг рдХреЗ рд▓рд┐рдП [LICENSE](../LICENSE) рджреЗрдЦреЗрдВред
