# redirector

[English](../README.md) | [–†—É—Å—Å–∫–∏–π](README.ru.md) | [‰∏≠Êñá](README.zh.md) | [‡§π‡§ø‡§Ç‡§¶‡•Ä](README.hi.md) | [Espa√±ol](README.es.md) | [Portugu√™s](README.pt.md) | [Fran√ßais](README.fr.md) | [Deutsch](README.de.md) | [Êó•Êú¨Ë™û](README.ja.md) | [ÌïúÍµ≠Ïñ¥](README.ko.md) | [Polski](README.pl.md) | [Nederlands](README.nl.md) | [Italiano](README.it.md) | [T√ºrk√ße](README.tr.md) | **–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞** | [Bahasa Indonesia](README.id.md) | [Ti·∫øng Vi·ªát](README.vi.md) | [Svenska](README.sv.md) | [Suomi](README.fi.md)

[![CI](https://github.com/brilliant-almazov/redirector/actions/workflows/ci.yml/badge.svg)](https://github.com/brilliant-almazov/redirector/actions/workflows/ci.yml)
[![Coverage](https://img.shields.io/endpoint?url=https://gist.githubusercontent.com/brilliant-almazov/5f930cca5d181b300d81d45850ddaf67/raw/coverage.json)](https://github.com/brilliant-almazov/redirector)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

[![RPS](https://img.shields.io/endpoint?url=https://gist.githubusercontent.com/brilliant-almazov/5f930cca5d181b300d81d45850ddaf67/raw/rps.json)](https://github.com/brilliant-almazov/redirector)
[![Latency](https://img.shields.io/endpoint?url=https://gist.githubusercontent.com/brilliant-almazov/5f930cca5d181b300d81d45850ddaf67/raw/latency.json)](https://github.com/brilliant-almazov/redirector)
[![Cache Hit](https://img.shields.io/endpoint?url=https://gist.githubusercontent.com/brilliant-almazov/5f930cca5d181b300d81d45850ddaf67/raw/cache_hit_rate.json)](https://github.com/brilliant-almazov/redirector)

–ë–µ–∑–ø–µ—á–Ω–∏–π —Å–µ—Ä–≤—ñ—Å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è URL –∑ –ø—Ä–æ–º—ñ–∂–Ω–∏–º–∏ —Å—Ç–æ—Ä—ñ–Ω–∫–∞–º–∏ —Ç–∞ –∫–æ—Ä–æ—Ç–∫–∏–º–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ hashid.

## –ü—Ä–æ–±–ª–µ–º–∞

–î—ñ–ª–∏—Ç–∏—Å—è –¥–æ–≤–≥–∏–º–∏ URL –Ω–µ–∑—Ä—É—á–Ω–æ. –°–∫–æ—Ä–æ—á—É–≤–∞—á—ñ URL —ñ—Å–Ω—É—é—Ç—å, –∞–ª–µ —á–∞—Å—Ç–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—å –æ–¥—Ä–∞–∑—É, —â–æ –º–æ–∂–µ –±—É—Ç–∏ —Ä–∏–∑–∏–∫–æ–º –±–µ–∑–ø–µ–∫–∏. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –ø–æ–≤–∏–Ω–Ω—ñ –±–∞—á–∏—Ç–∏, –∫—É–¥–∏ –≤–æ–Ω–∏ –π–¥—É—Ç—å, –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è–º.

**redirector** –∑–∞–±–µ–∑–ø–µ—á—É—î –±–µ–∑–ø–µ—á–Ω—ñ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∑:
- –ü—Ä–æ–º—ñ–∂–Ω–æ—é —Å—Ç–æ—Ä—ñ–Ω–∫–æ—é, —â–æ –ø–æ–∫–∞–∑—É—î —Ü—ñ–ª—å–æ–≤–∏–π URL –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è–º
- –¢–∞–π–º–µ—Ä–æ–º –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≤—ñ–¥–ª—ñ–∫—É –¥–ª—è –æ–±—ñ–∑–Ω–∞–Ω–æ—Å—Ç—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –ö—Ä–∞—Å–∏–≤–∏–º–∏, –±—Ä–µ–Ω–¥–æ–≤–∞–Ω–∏–º–∏ —Å—Ç–æ—Ä—ñ–Ω–∫–∞–º–∏

## –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- üîó **Hashid URL** - –ö–æ—Ä–æ—Ç–∫—ñ, —É–Ω—ñ–∫–∞–ª—å–Ω—ñ, –Ω–µ–ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ ID (–Ω–∞–ø—Ä. `/r/abc123`)
- ‚è±Ô∏è **–ü—Ä–æ–º—ñ–∂–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞** - –ó–≤–æ—Ä–æ—Ç–Ω–∏–π –≤—ñ–¥–ª—ñ–∫ –ø–æ–∫–∞–∑—É—î —Ü—ñ–ª—å–æ–≤–∏–π URL –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è–º
- ‚ö° **–ö–µ—à—É–≤–∞–Ω–Ω—è Redis** - –®–≤–∏–¥–∫—ñ –∑–∞–ø–∏—Ç–∏ –∑ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞–Ω–∏–º TTL
- üõ°Ô∏è **Circuit breaker** - –ó–∞—Ö–∏—Å—Ç –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –≤—ñ–¥ –∫–∞—Å–∫–∞–¥–Ω–∏—Ö –∑–±–æ—ó–≤
- üö¶ **–û–±–º–µ–∂–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ** - –ì–ª–æ–±–∞–ª—å–Ω—ñ —Ç–∞ –Ω–∞ —Ä—ñ–≤–Ω—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- üìä **–ú–µ—Ç—Ä–∏–∫–∏ Prometheus** - –ü–æ–≤–Ω–∞ —Å–ø–æ—Å—Ç–µ—Ä–µ–∂—É–≤–∞–Ω—ñ—Å—Ç—å —ñ–∑ –∑–∞—Ö–∏—Å—Ç–æ–º Basic Auth
- üé® **–ö—Ä–∞—Å–∏–≤—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏** - –ß–∏—Å—Ç—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ 404 —Ç–∞ —ñ–Ω–¥–µ–∫—Å—É
- üîë **–ö—ñ–ª—å–∫–∞ —Å–æ–ª–µ–π** - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ä–æ—Ç–∞—Ü—ñ—ó —Å–æ–ª—ñ hashid –¥–ª—è –º—ñ–≥—Ä–∞—Ü—ñ—ó

## –®–≤–∏–¥–∫–∏–π –°—Ç–∞—Ä—Ç

### Docker

```bash
docker run -p 8080:8080 \
  -v $(pwd)/config.yaml:/config.yaml \
  ghcr.io/brilliant-almazov/redirector:latest
```

## –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏

| –ï–Ω–¥–ø–æ—ñ–Ω—Ç | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è | –û–ø–∏—Å |
|----------|-------------|------|
| `GET /` | –ù—ñ | –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ |
| `GET /r/{hashid}` | –ù—ñ | –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∑ –ø—Ä–æ–º—ñ–∂–Ω–æ—é —Å—Ç–æ—Ä—ñ–Ω–∫–æ—é |
| `GET /health` | –ù—ñ | –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É |
| `GET /metrics` | Basic | –ú–µ—Ç—Ä–∏–∫–∏ Prometheus |
| `GET /admin` | –°–µ—Å—ñ—è | –í—Ö—ñ–¥ –¥–æ –ø–∞–Ω–µ–ª—ñ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ |
| `GET /admin/dashboard` | –°–µ—Å—ñ—è | –ü–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ |

## –ü–∞–Ω–µ–ª—å –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–°–µ—Ä–≤—ñ—Å –≤–∫–ª—é—á–∞—î –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω—É –ø–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –º–µ—Ç—Ä–∏–∫ —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ.

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

1. **–ó–≥–µ–Ω–µ—Ä—É–π—Ç–µ —Ö–µ—à –ø–∞—Ä–æ–ª—è:**

```bash
cargo run --bin hash_password
# –í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å –∑–∞ –∑–∞–ø–∏—Ç–æ–º, –∞–±–æ:
cargo run --bin hash_password -- "–≤–∞—à-–ø–∞—Ä–æ–ª—å"
```

2. **–î–æ–¥–∞–π—Ç–µ –¥–æ config.yaml:**

```yaml
admin:
  enabled: true
  session_ttl_hours: 24
  users:
    - username: admin
      password_hash: "$argon2id$v=19$m=19456,t=2,p=1$..."  # –∑ –∫—Ä–æ–∫—É 1
```

3. **–í—ñ–¥–∫—Ä–∏–π—Ç–µ –ø–∞–Ω–µ–ª—å:**

–ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ `http://localhost:8080/admin` —Ç–∞ —É–≤—ñ–π–¥—ñ—Ç—å –∑—ñ —Å–≤–æ—ó–º–∏ –æ–±–ª—ñ–∫–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏.

### –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- –ì—Ä–∞—Ñ—ñ–∫–∏ RPS —Ç–∞ –∑–∞—Ç—Ä–∏–º–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- –°–∏—Å—Ç–µ–º–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏ (CPU, –ø–∞–º'—è—Ç—å, —á–∞—Å —Ä–æ–±–æ—Ç–∏)
- –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∞ –≤–ª—É—á–∞–Ω—å –∫–µ—à—É
- –°–ø–∏—Å–æ–∫ –æ—Å—Ç–∞–Ω–Ω—ñ—Ö –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—å
- –°–∏–º—É–ª—è—Ü—ñ—è –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- –¢—Ä–∏ —Ç–µ–º–∏: –°–≤—ñ—Ç–ª–∞, –¢–µ–º–Ω–∞, –¢–µ–ø–ª–∞

## –Ø–∫ –¶–µ –ü—Ä–∞—Ü—é—î

1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤—ñ–¥–≤—ñ–¥—É—î `/r/{hashid}` (–Ω–∞–ø—Ä. `/r/abc123`)
2. –°–µ—Ä–≤—ñ—Å –¥–µ–∫–æ–¥—É—î hashid —É —á–∏—Å–ª–æ–≤–∏–π ID
3. –ü–µ—Ä–µ–≤—ñ—Ä—è—î –∫–µ—à Redis –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å URL
4. –ü—Ä–∏ –ø—Ä–æ–º–∞—Ö—É –∫–µ—à—É –∑–∞–ø–∏—Ç—É—î PostgreSQL
5. –ö–µ—à—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É Redis
6. –ü–æ–∫–∞–∑—É—î –ø—Ä–æ–º—ñ–∂–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑—ñ –∑–≤–æ—Ä–æ—Ç–Ω–∏–º –≤—ñ–¥–ª—ñ–∫–æ–º
7. –ü—ñ—Å–ª—è –≤—ñ–¥–ª—ñ–∫—É –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î –Ω–∞ —Ü—ñ–ª—å–æ–≤–∏–π URL

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

–õ—ñ—Ü–µ–Ω–∑—ñ—è MIT - –¥–µ—Ç–∞–ª—ñ —É [LICENSE](../LICENSE).
