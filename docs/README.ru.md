# redirector

> **–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫ –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤** –Ω–∞ Rust, Axum, Redis –∏ PostgreSQL. –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –ø–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø–æ–ª–Ω–∞—è –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å.

[English](../README.md) | **–†—É—Å—Å–∫–∏–π** | [‰∏≠Êñá](README.zh.md) | [‡§π‡§ø‡§Ç‡§¶‡•Ä](README.hi.md) | [Espa√±ol](README.es.md) | [Portugu√™s](README.pt.md) | [Fran√ßais](README.fr.md) | [Deutsch](README.de.md) | [Êó•Êú¨Ë™û](README.ja.md) | [ÌïúÍµ≠Ïñ¥](README.ko.md) | [Polski](README.pl.md) | [Nederlands](README.nl.md) | [Italiano](README.it.md) | [T√ºrk√ße](README.tr.md) | [–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞](README.uk.md) | [◊¢◊ë◊®◊ô◊™](README.he.md) | [Bahasa Indonesia](README.id.md) | [Ti·∫øng Vi·ªát](README.vi.md) | [Svenska](README.sv.md) | [Suomi](README.fi.md)

[![CI](https://github.com/brilliant-almazov/redirector/actions/workflows/ci.yml/badge.svg)](https://github.com/brilliant-almazov/redirector/actions/workflows/ci.yml)
[![Coverage](https://img.shields.io/endpoint?url=https://gist.githubusercontent.com/brilliant-almazov/5f930cca5d181b300d81d45850ddaf67/raw/coverage.json)](https://github.com/brilliant-almazov/redirector)
[![Docker Image Size](https://ghcr-badge.egpl.dev/brilliant-almazov/redirector/size)](https://github.com/brilliant-almazov/redirector/pkgs/container/redirector)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

[![RPS](https://img.shields.io/endpoint?url=https://gist.githubusercontent.com/brilliant-almazov/5f930cca5d181b300d81d45850ddaf67/raw/rps.json)](https://github.com/brilliant-almazov/redirector)
[![Latency](https://img.shields.io/endpoint?url=https://gist.githubusercontent.com/brilliant-almazov/5f930cca5d181b300d81d45850ddaf67/raw/latency.json)](https://github.com/brilliant-almazov/redirector)
[![Cache Hit](https://img.shields.io/endpoint?url=https://gist.githubusercontent.com/brilliant-almazov/5f930cca5d181b300d81d45850ddaf67/raw/cache_hit_rate.json)](https://github.com/brilliant-almazov/redirector)

**–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞**: —Å–æ–∫—Ä–∞—â–∞—Ç–µ–ª—å —Å—Å—ã–ª–æ–∫, url shortener, —Å–µ—Ä–≤–∏—Å —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤, rust –≤–µ–±-—Å–µ—Ä–≤–∏—Å, axum —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, redis –∫—ç—à, postgresql, prometheus –º–µ—Ç—Ä–∏–∫–∏, hashids, –∫–æ—Ä–æ—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏, –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã, –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å

–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ —Å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ –∏ –∫–æ—Ä–æ—Ç–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ hashid. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Å—ã–ª–∫–∞–º–∏ –∏ –±—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö URL-—Å–µ—Ä–≤–∏—Å–æ–≤.

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –°—Ü–µ–Ω–∞—Ä–∏–π | RPS | –°—Ä–µ–¥–Ω. –∑–∞–¥–µ—Ä–∂–∫–∞ | P99 –∑–∞–¥–µ—Ä–∂–∫–∞ |
|----------|-----|-----------------|--------------|
| 100% Cache Hit | **7,800+** | ~14ms | ~50ms |
| Cache Miss (10K URLs) | **2,300+** | ~44ms | ~81ms |

**–£—Å–ª–æ–≤–∏—è —Ç–µ—Å—Ç–∞**: wrk -t4 -c100 -d30s, PostgreSQL 15, Dragonfly (Redis), macOS M1 (Docker)

> ‚ö†Ô∏è –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–ª—É—á–µ–Ω—ã –≤ Docker –Ω–∞ macOS —Å overhead –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏. –ù–∞ native Linux –æ–∂–∏–¥–∞–µ—Ç—Å—è **–≤ 3-5 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ**.

## –ü—Ä–æ–±–ª–µ–º–∞

–î–µ–ª–∏—Ç—å—Å—è –¥–ª–∏–Ω–Ω—ã–º–∏ URL –Ω–µ—É–¥–æ–±–Ω–æ. –°–æ–∫—Ä–∞—â–∞—Ç–µ–ª–∏ —Å—Å—ã–ª–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—Ç, –Ω–æ —á–∞—Å—Ç–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å, –∫—É–¥–∞ –∏—Ö –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç, –ø—Ä–µ–∂–¥–µ —á–µ–º –ø–µ—Ä–µ–π—Ç–∏.

**redirector** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã:
- –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ü–µ–ª–µ–≤–æ–π URL –ø–µ—Ä–µ–¥ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º
- –û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á—ë—Ç –¥–ª—è –æ—Å–≤–µ–¥–æ–º–ª—ë–Ω–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ö—Ä–∞—Å–∏–≤—ã–µ, –±—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîó **Hashid URL** - –ö–æ—Ä–æ—Ç–∫–∏–µ, —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ, –Ω–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/r/abc123`)
- ‚è±Ô∏è **–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** - –û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á—ë—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ü–µ–ª–µ–≤–æ–π URL –ø–µ—Ä–µ–¥ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º
- ‚ö° **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Redis** - –ë—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º TTL
- üõ°Ô∏è **Circuit breaker** - –ó–∞—â–∏—Ç–∞ –ë–î –æ—Ç –∫–∞—Å–∫–∞–¥–Ω—ã—Ö —Å–±–æ–µ–≤
- üö¶ **Rate limiting** - –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î
- üìä **Prometheus –º–µ—Ç—Ä–∏–∫–∏** - –ü–æ–ª–Ω–∞—è –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å —Å Basic Auth –∑–∞—â–∏—Ç–æ–π
- üé® **–ö—Ä–∞—Å–∏–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** - –ß–∏—Å—Ç—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã 404 –∏ –∏–Ω–¥–µ–∫—Å–∞ —Å 4 —Ç–µ–º–∞–º–∏
- üîë **–ù–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–ª–µ–π** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏ —Å–æ–ª–∏ hashid –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
- üì± **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ SSE

## –°–∫—Ä–∏–Ω—à–æ—Ç—ã

| –°–≤–µ—Ç–ª–∞—è | –¢—ë–º–Ω–∞—è | –°–µ—Ä–∞—è | –¢—ë–ø–ª–∞—è |
|---------|--------|-------|--------|
| ![–î–∞—à–±–æ—Ä–¥ —Å–≤–µ—Ç–ª–∞—è](screenshots/dashboard-light.png) | ![–î–∞—à–±–æ—Ä–¥ —Ç—ë–º–Ω–∞—è](screenshots/dashboard-dark.png) | ![–î–∞—à–±–æ—Ä–¥ —Å–µ—Ä–∞—è](screenshots/dashboard-gray.png) | ![–î–∞—à–±–æ—Ä–¥ —Ç—ë–ø–ª–∞—è](screenshots/dashboard-warm.png) |
| ![–õ–æ–≥–∏–Ω —Å–≤–µ—Ç–ª–∞—è](screenshots/login-light.png) | ![–õ–æ–≥–∏–Ω —Ç—ë–º–Ω–∞—è](screenshots/login-dark.png) | ![–õ–æ–≥–∏–Ω —Å–µ—Ä–∞—è](screenshots/login-gray.png) | ![–õ–æ–≥–∏–Ω —Ç—ë–ø–ª–∞—è](screenshots/login-warm.png) |

### –ú–æ–¥–∞–ª–∫–∞ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –°–≤–µ—Ç–ª–∞—è | –¢—ë–º–Ω–∞—è | –°–µ—Ä–∞—è | –¢—ë–ø–ª–∞—è |
|---------|--------|-------|--------|
| ![–ú–æ–¥–∞–ª–∫–∞ —Å–≤–µ—Ç–ª–∞—è](screenshots/dashboard-modal-light.png) | ![–ú–æ–¥–∞–ª–∫–∞ —Ç—ë–º–Ω–∞—è](screenshots/dashboard-modal-dark.png) | ![–ú–æ–¥–∞–ª–∫–∞ —Å–µ—Ä–∞—è](screenshots/dashboard-modal-gray.png) | ![–ú–æ–¥–∞–ª–∫–∞ —Ç—ë–ø–ª–∞—è](screenshots/dashboard-modal-warm.png) |

## –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **–Ø–∑—ã–∫**: Rust (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å Tokio)
- **–í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫**: Axum
- **–ö—ç—à**: Redis-compatible (Redis, Dragonfly, Valkey, KeyDB –∏ –¥—Ä.)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL (–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π —Å–ª–æ–π —Ö—Ä–∞–Ω–µ–Ω–∏—è)
- **–ú–µ—Ç—Ä–∏–∫–∏**: Prometheus + metrics-rs
- **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π**: Argon2

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –°–ª–æ–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∞–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞–Ω—ã –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–º–µ–Ω–µ–Ω—ã –ª—é–±—ã–º —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–æ–µ–∫—Ç –≤ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### Docker

```bash
docker run -p 8080:8080 \
  -v $(pwd)/config.yaml:/config.yaml \
  ghcr.io/brilliant-almazov/redirector:latest
```

### Docker Compose

```yaml
services:
  redirector:
    image: ghcr.io/brilliant-almazov/redirector:latest
    ports:
      - "8080:8080"
    volumes:
      - ./config.yaml:/config.yaml
    depends_on:
      - postgres
      - redis

  postgres:
    image: postgres:16-alpine
    environment:
      POSTGRES_USER: redirector
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      POSTGRES_DB: redirector

  redis:
    image: redis:7-alpine
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `config.yaml`:

```yaml
server:
  host: "0.0.0.0"
  port: 8080

hashids:
  salts:
    - ${HASHID_SALT}          # –û—Å–Ω–æ–≤–Ω–∞—è —Å–æ–ª—å
    - ${HASHID_SALT_OLD}      # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Å—Ç–∞—Ä–∞—è —Å–æ–ª—å –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
  min_length: 6

redis:
  url: ${REDIS_URL}
  cache_ttl_seconds: 86400    # 24 —á–∞—Å–∞

database:
  url: ${DATABASE_URL}
  pool:
    max_connections: 5
    connect_timeout_seconds: 3
  rate_limit:
    max_requests_per_second: 50
  circuit_breaker:
    failure_threshold: 3
    reset_timeout_seconds: 60
  query:
    table: "dictionary.urls"    # –ò–º—è —Ç–∞–±–ª–∏—Ü—ã
    id_column: "id"             # –ö–æ–ª–æ–Ω–∫–∞ ID
    url_column: "name"          # –ö–æ–ª–æ–Ω–∫–∞ URL

interstitial:
  delay_seconds: 5            # –û—Ç—Å—á—ë—Ç –ø–µ—Ä–µ–¥ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º

metrics:
  basic_auth:
    username: prometheus
    password: ${METRICS_PASSWORD}

rate_limit:
  requests_per_second: 1000
  burst: 100
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### –°–µ—Ä–≤–µ—Ä

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------------|----------|
| `host` | `0.0.0.0` | –ê–¥—Ä–µ—Å –ø—Ä–∏–≤—è–∑–∫–∏ |
| `port` | `8080` | HTTP –ø–æ—Ä—Ç |

#### Hashids

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------------|----------|
| `salts` | *–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ* | –°–ø–∏—Å–æ–∫ —Å–æ–ª–µ–π hashid (–ø–µ—Ä–≤–∞—è = –æ—Å–Ω–æ–≤–Ω–∞—è) |
| `min_length` | `6` | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ hashid |

#### Redis

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------------|----------|
| `url` | *–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ* | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis |
| `cache_ttl_seconds` | `86400` | TTL –∫—ç—à–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö |

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------------|----------|
| `url` | *–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ* | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL |
| `pool.max_connections` | `3` | –†–∞–∑–º–µ—Ä –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π |
| `pool.connect_timeout_seconds` | `3` | –¢–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è |
| `rate_limit.max_requests_per_second` | `50` | Rate limit –ë–î |
| `circuit_breaker.failure_threshold` | `3` | –°–±–æ–µ–≤ –¥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è |
| `circuit_breaker.reset_timeout_seconds` | `60` | –¢–∞–π–º–∞—É—Ç —Å–±—Ä–æ—Å–∞ circuit |

#### Rate Limit (–≥–ª–æ–±–∞–ª—å–Ω—ã–π)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------------|----------|
| `requests_per_second` | `1000` | –ì–ª–æ–±–∞–ª—å–Ω—ã–π rate limit |
| `burst` | `100` | –†–∞–∑–º–µ—Ä –≤—Å–ø–ª–µ—Å–∫–∞ |

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫—É `${VAR}`. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:

- `CONFIG_FILE` - –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `config.yaml`)

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–°–µ—Ä–≤–∏—Å—É –Ω—É–∂–Ω–∞ –ø—Ä–æ—Å—Ç–∞—è —Å–≤—è–∑—å: **ID ‚Üí URL**

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –∏ –∫–æ–ª–æ–Ω–∫–∏ –≤ `config.yaml`:

```yaml
database:
  query:
    table: "dictionary.urls"    # –ò–º—è —Ç–∞–±–ª–∏—Ü—ã
    id_column: "id"             # –ö–æ–ª–æ–Ω–∫–∞ ID (BIGINT)
    url_column: "name"          # –ö–æ–ª–æ–Ω–∫–∞ URL (VARCHAR)
```

–ü—Ä–∏–º–µ—Ä —Å—Ö–µ–º—ã —Ç–∞–±–ª–∏—Ü—ã:

```sql
CREATE TABLE dictionary.urls (
    id BIGINT PRIMARY KEY,
    name VARCHAR(4096) NOT NULL
);
```

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------------|----------|
| `GET /` | –ù–µ—Ç | –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ |
| `GET /r/{hashid}` | –ù–µ—Ç | –†–µ–¥–∏—Ä–µ–∫—Ç —Å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π |
| `GET /d/{hashid}` | –ù–µ—Ç | –î–µ–º–æ-—Ä–µ–¥–∏—Ä–µ–∫—Ç (—Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) |
| `GET /health` | –ù–µ—Ç | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è |
| `GET /metrics` | Basic | Prometheus –º–µ—Ç—Ä–∏–∫–∏ |
| `GET /admin` | Session | –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å |
| `GET /admin/dashboard` | Session | –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å |

## –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

–°–µ—Ä–≤–∏—Å –≤–∫–ª—é—á–∞–µ—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –º–µ—Ç—Ä–∏–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. **–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ö—ç—à –ø–∞—Ä–æ–ª—è:**

```bash
cargo run --bin hash_password
# –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∏–ª–∏:
cargo run --bin hash_password -- "–≤–∞—à-–ø–∞—Ä–æ–ª—å"
```

2. **–î–æ–±–∞–≤—å—Ç–µ –≤ config.yaml:**

```yaml
admin:
  enabled: true
  session_ttl_hours: 24
  users:
    - username: admin
      password_hash: "$argon2id$v=19$m=19456,t=2,p=1$..."  # –∏–∑ —à–∞–≥–∞ 1
```

3. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å:**

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `http://localhost:8080/admin` –∏ –≤–æ–π–¥–∏—Ç–µ —Å –≤–∞—à–∏–º–∏ —É—á—ë—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ì—Ä–∞—Ñ–∏–∫–∏ RPS –∏ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (CPU, –ø–∞–º—è—Ç—å, uptime)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ cache hit rate
- –°–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤
- –°–∏–º—É–ª—è—Ü–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –¢—Ä–∏ —Ç–µ–º—ã: –°–≤–µ—Ç–ª–∞—è, –¢—ë–º–Ω–∞—è, –¢—ë–ø–ª–∞—è

## –ú–µ—Ç—Ä–∏–∫–∏

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç Prometheus –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ `/metrics` (—Ç—Ä–µ–±—É–µ—Ç—Å—è Basic Auth):

### –ú–µ—Ç—Ä–∏–∫–∏ —Å–µ—Ä–≤–∏—Å–∞
```
redirector_up 1
redirector_build_info{version="0.1.0"} 1
redirector_uptime_seconds 3600.5
```

### –ú–µ—Ç—Ä–∏–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
```
redirect_requests_total 150000
not_found_requests_total 50
request_duration_seconds{quantile="0.5"} 0.040
request_duration_seconds{quantile="0.99"} 0.081
```

### –ú–µ—Ç—Ä–∏–∫–∏ –∫—ç—à–∞
```
cache_hits_total 140000
cache_misses_total 10000
cache_get_duration_seconds{quantile="0.5"} 0.002
cache_set_duration_seconds{quantile="0.5"} 0.002
```

### –ú–µ—Ç—Ä–∏–∫–∏ –ë–î
```
db_queries_total 10000
db_hits_total 9950
db_misses_total 50
db_query_duration_seconds{quantile="0.5"} 0.035
db_rate_limit_exceeded_total 0
circuit_breaker_rejections_total 0
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Å–µ—â–∞–µ—Ç `/r/{hashid}` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/r/abc123`)
2. –°–µ—Ä–≤–∏—Å –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç hashid –≤ —á–∏—Å–ª–æ–≤–æ–π ID
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫—ç—à Redis –Ω–∞ –Ω–∞–ª–∏—á–∏–µ URL
4. –ü—Ä–∏ –ø—Ä–æ–º–∞—Ö–µ –∫—ç—à–∞ ‚Äî –∑–∞–ø—Ä–æ—Å –∫ PostgreSQL
5. –ö—ç—à–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Redis
6. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –æ—Ç—Å—á—ë—Ç–æ–º
7. –ü–æ—Å–ª–µ –æ—Ç—Å—á—ë—Ç–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ —Ü–µ–ª–µ–≤–æ–π URL

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ–ö–ª–∏–µ–Ω—Ç‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇRedirector ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ Redis ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇPostgreSQL‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
                  ‚ñº
           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚îÇ–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è‚îÇ
           ‚îÇ  —Å—Ç—Ä–∞–Ω–∏—Ü–∞   ‚îÇ
           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –°–±–æ—Ä–∫–∞

```bash
# –°–±–æ—Ä–∫–∞
cargo build --release

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
cargo test

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
cargo llvm-cov --text

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞
cargo fmt --all -- --check
cargo clippy --all-targets --all-features -- -D warnings
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ [LICENSE](../LICENSE).

## –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

–í–∫–ª–∞–¥ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç—Å—è! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞:

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ feature-–≤–µ—Ç–∫—É
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ Pull Request

–ó–∞—â–∏—â—ë–Ω–Ω–∞—è master-–≤–µ—Ç–∫–∞ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–≤—å—é PR.
